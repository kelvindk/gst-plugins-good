/* GStreamer
 * Copyright (C) 2019 FIXME <fixme@example.com>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Library General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Library General Public License for more details.
 *
 * You should have received a copy of the GNU Library General Public
 * License along with this library; if not, write to the
 * Free Software Foundation, Inc., 51 Franklin St, Fifth Floor,
 * Boston, MA 02110-1301, USA.
 */

#ifndef _GST_PD_NR_AUDIO_H_
#define _GST_PD_NR_AUDIO_H_

#include <gst/base/base.h>
#include <gst/audio/gstaudiofilter.h>

#include <gst/fft/gstfftf32.h>

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

G_BEGIN_DECLS

#define GST_TYPE_PD_NR_AUDIO   (gst_pd_nr_audio_get_type())
#define GST_PD_NR_AUDIO(obj)   (G_TYPE_CHECK_INSTANCE_CAST((obj),GST_TYPE_PD_NR_AUDIO,GstPdNrAudio))
#define GST_PD_NR_AUDIO_CLASS(klass)   (G_TYPE_CHECK_CLASS_CAST((klass),GST_TYPE_PD_NR_AUDIO,GstPdNrAudioClass))
#define GST_IS_PD_NR_AUDIO(obj)   (G_TYPE_CHECK_INSTANCE_TYPE((obj),GST_TYPE_PD_NR_AUDIO))
#define GST_IS_PD_NR_AUDIO_CLASS(obj)   (G_TYPE_CHECK_CLASS_TYPE((klass),GST_TYPE_PD_NR_AUDIO))

#define FFT_WINDOW_SIZE 2048
#define FFT_HOP_SIZE 512
#define FFT_SIZE ((FFT_WINDOW_SIZE/2)+2)
#define F_GAIN 3.8

const gfloat estR[] = {0.156256 ,0.278515 ,0.307938 ,0.360837 ,0.464760 ,0.508102 ,0.551821 ,0.606352 ,0.574584 ,0.555158 ,0.588032 ,0.631793 ,0.586649 ,0.562683 ,0.611194 ,0.543903 ,0.523410 ,0.556611 ,0.538786 ,0.524155 ,0.529935 ,0.524098 ,0.508718 ,0.475122 ,0.473748 ,0.492954 ,0.443027 ,0.431379 ,0.439238 ,0.428321 ,0.391949 ,0.380491 ,0.378861 ,0.351169 ,0.335615 ,0.329724 ,0.333530 ,0.302820 ,0.279690 ,0.288354 ,0.268297 ,0.256144 ,0.244559 ,0.241944 ,0.227763 ,0.217877 ,0.192732 ,0.185747 ,0.175391 ,0.172224 ,0.163888 ,0.153510 ,0.151374 ,0.130327 ,0.136535 ,0.139995 ,0.132545 ,0.126026 ,0.116949 ,0.120805 ,0.126088 ,0.122812 ,0.100009 ,0.101403 ,0.105058 ,0.094006 ,0.093108 ,0.104755 ,0.093773 ,0.091286 ,0.096827 ,0.094482 ,0.086991 ,0.088270 ,0.091708 ,0.090090 ,0.084402 ,0.084326 ,0.086267 ,0.086054 ,0.080726 ,0.084700 ,0.083346 ,0.078339 ,0.081752 ,0.092598 ,0.094616 ,0.101224 ,0.090141 ,0.069981 ,0.060591 ,0.057888 ,0.050696 ,0.048310 ,0.046815 ,0.045484 ,0.038300 ,0.037443 ,0.035029 ,0.036158 ,0.037796 ,0.033790 ,0.030333 ,0.032871 ,0.032573 ,0.029420 ,0.028967 ,0.030117 ,0.031690 ,0.037741 ,0.044015 ,0.041482 ,0.041197 ,0.045605 ,0.045678 ,0.050010 ,0.050501 ,0.046668 ,0.044407 ,0.045955 ,0.049900 ,0.051541 ,0.047493 ,0.048763 ,0.053030 ,0.054798 ,0.053848 ,0.058274 ,0.058084 ,0.058215 ,0.056660 ,0.054165 ,0.053758 ,0.049217 ,0.047663 ,0.046394 ,0.042006 ,0.037820 ,0.033255 ,0.032399 ,0.031372 ,0.030076 ,0.028588 ,0.030148 ,0.030706 ,0.028509 ,0.028980 ,0.030640 ,0.033063 ,0.047982 ,0.049502 ,0.034135 ,0.033299 ,0.033199 ,0.034491 ,0.031654 ,0.032058 ,0.030933 ,0.028326 ,0.027270 ,0.027504 ,0.028078 ,0.030698 ,0.031513 ,0.034494 ,0.033852 ,0.037634 ,0.041786 ,0.040805 ,0.043614 ,0.051736 ,0.053154 ,0.060773 ,0.067775 ,0.075364 ,0.088287 ,0.094368 ,0.077437 ,0.060200 ,0.051994 ,0.046511 ,0.042355 ,0.038600 ,0.035320 ,0.031715 ,0.032952 ,0.029265 ,0.029009 ,0.026314 ,0.028411 ,0.029037 ,0.027067 ,0.026047 ,0.025960 ,0.028023 ,0.028730 ,0.028442 ,0.029573 ,0.031722 ,0.031689 ,0.029923 ,0.031992 ,0.033446 ,0.034293 ,0.034826 ,0.035909 ,0.036580 ,0.035031 ,0.036419 ,0.035776 ,0.037242 ,0.037214 ,0.040996 ,0.038542 ,0.037649 ,0.042383 ,0.041592 ,0.038984 ,0.037852 ,0.039224 ,0.041799 ,0.040483 ,0.041245 ,0.037569 ,0.039469 ,0.039561 ,0.038214 ,0.045177 ,0.049117 ,0.047392 ,0.032355 ,0.035585 ,0.037023 ,0.035989 ,0.035486 ,0.032811 ,0.029215 ,0.029408 ,0.026047 ,0.027262 ,0.028489 ,0.026846 ,0.024895 ,0.024234 ,0.025178 ,0.022161 ,0.019634 ,0.019435 ,0.019336 ,0.018987 ,0.020699 ,0.020246 ,0.018837 ,0.017907 ,0.019023 ,0.018645 ,0.018710 ,0.019660 ,0.021056 ,0.021930 ,0.022605 ,0.024017 ,0.028246 ,0.029854 ,0.031388 ,0.027887 ,0.026366 ,0.024513 ,0.022538 ,0.020604 ,0.020480 ,0.020968 ,0.021245 ,0.019039 ,0.019349 ,0.018468 ,0.019356 ,0.018793 ,0.018539 ,0.018745 ,0.018987 ,0.017068 ,0.016630 ,0.018135 ,0.018949 ,0.018073 ,0.017354 ,0.018808 ,0.017117 ,0.016520 ,0.017059 ,0.017374 ,0.017565 ,0.016765 ,0.016476 ,0.016772 ,0.017196 ,0.016120 ,0.016760 ,0.015904 ,0.016049 ,0.017333 ,0.017527 ,0.017435 ,0.016910 ,0.021767 ,0.019015 ,0.016539 ,0.016909 ,0.016542 ,0.017753 ,0.017269 ,0.018020 ,0.017059 ,0.019751 ,0.022530 ,0.016814 ,0.016607 ,0.019155 ,0.022985 ,0.030941 ,0.039032 ,0.042049 ,0.042872 ,0.051260 ,0.067134 ,0.081980 ,0.082393 ,0.080878 ,0.100349 ,0.108287 ,0.106411 ,0.110452 ,0.130260 ,0.143440 ,0.156180 ,0.186370 ,0.213646 ,0.233986 ,0.275186 ,0.350030 ,0.544204 ,1.006101 ,1.652535 ,2.846570 ,1.851915 ,0.610228 ,0.387404 ,0.254971 ,0.207362 ,0.163404 ,0.129181 ,0.110132 ,0.097139 ,0.077477 ,0.065800 ,0.062268 ,0.061235 ,0.065083 ,0.051802 ,0.039809 ,0.037165 ,0.038478 ,0.031731 ,0.028298 ,0.022620 ,0.024240 ,0.024451 ,0.025102 ,0.025256 ,0.025733 ,0.028316 ,0.036756 ,0.038403 ,0.039939 ,0.041143 ,0.041673 ,0.041478 ,0.043448 ,0.046170 ,0.045799 ,0.043395 ,0.045757 ,0.041943 ,0.042067 ,0.043613 ,0.040723 ,0.042402 ,0.038895 ,0.039980 ,0.039478 ,0.036330 ,0.035412 ,0.035693 ,0.033813 ,0.032639 ,0.031002 ,0.029896 ,0.031274 ,0.029395 ,0.026427 ,0.022488 ,0.022390 ,0.020865 ,0.020388 ,0.017432 ,0.016345 ,0.016018 ,0.015960 ,0.014296 ,0.012749 ,0.012279 ,0.013651 ,0.014231 ,0.015310 ,0.014455 ,0.014970 ,0.016603 ,0.017453 ,0.019930 ,0.023251 ,0.022863 ,0.023310 ,0.021764 ,0.021354 ,0.023028 ,0.026049 ,0.025963 ,0.027102 ,0.027241 ,0.027360 ,0.031368 ,0.033089 ,0.034953 ,0.039575 ,0.047188 ,0.050386 ,0.050540 ,0.057387 ,0.061911 ,0.059543 ,0.057042 ,0.050004 ,0.050091 ,0.049305 ,0.044844 ,0.043514 ,0.035737 ,0.027271 ,0.026276 ,0.025160 ,0.022557 ,0.020772 ,0.020363 ,0.018520 ,0.016638 ,0.014720 ,0.014322 ,0.015297 ,0.015179 ,0.014166 ,0.013224 ,0.012600 ,0.013080 ,0.013935 ,0.014752 ,0.015170 ,0.013785 ,0.014949 ,0.017697 ,0.018712 ,0.018295 ,0.018924 ,0.018187 ,0.018164 ,0.018512 ,0.018861 ,0.020131 ,0.021897 ,0.022976 ,0.022609 ,0.022066 ,0.023649 ,0.023620 ,0.023423 ,0.024378 ,0.023792 ,0.024496 ,0.025360 ,0.023563 ,0.022325 ,0.022721 ,0.022659 ,0.021482 ,0.020197 ,0.020860 ,0.018157 ,0.019923 ,0.021496 ,0.018736 ,0.019729 ,0.018766 ,0.017937 ,0.015148 ,0.014827 ,0.014460 ,0.012756 ,0.012062 ,0.011902 ,0.010916 ,0.010989 ,0.010966 ,0.010296 ,0.010860 ,0.012380 ,0.017036 ,0.017419 ,0.012188 ,0.012297 ,0.013779 ,0.015753 ,0.017800 ,0.017974 ,0.018055 ,0.018956 ,0.020581 ,0.022589 ,0.023783 ,0.022525 ,0.022757 ,0.024542 ,0.023379 ,0.024839 ,0.023457 ,0.022311 ,0.023280 ,0.020832 ,0.020611 ,0.022338 ,0.020529 ,0.018324 ,0.018063 ,0.017730 ,0.018150 ,0.016626 ,0.015467 ,0.016229 ,0.014907 ,0.014220 ,0.013288 ,0.012038 ,0.011264 ,0.010965 ,0.009722 ,0.009097 ,0.008256 ,0.008415 ,0.007339 ,0.007356 ,0.006959 ,0.006692 ,0.006800 ,0.006724 ,0.006792 ,0.006251 ,0.005808 ,0.005539 ,0.005568 ,0.005294 ,0.005010 ,0.004693 ,0.004564 ,0.003776 ,0.003535 ,0.003555 ,0.003304 ,0.002836 ,0.002835 ,0.002276 ,0.002159 ,0.002102 ,0.001776 ,0.001680 ,0.001488 ,0.001349 ,0.001165 ,0.001014 ,0.000886 ,0.000788 ,0.000696 ,0.000568 ,0.000403 ,0.000353 ,0.000331 ,0.000288 ,0.000303 ,0.000309 ,0.000287 ,0.000311 ,0.000311 ,0.000285 ,0.000312 ,0.000320 ,0.000294 ,0.000311 ,0.000337 ,0.000320 ,0.000327 ,0.000371 ,0.000327 ,0.000351 ,0.000361 ,0.000336 ,0.000351 ,0.000390 ,0.000351 ,0.000369 ,0.000383 ,0.000363 ,0.000371 ,0.000412 ,0.000377 ,0.000393 ,0.000421 ,0.000410 ,0.000395 ,0.000433 ,0.000434 ,0.000453 ,0.000456 ,0.000416 ,0.000424 ,0.000477 ,0.000446 ,0.000479 ,0.000503 ,0.000490 ,0.000490 ,0.000515 ,0.000485 ,0.000482 ,0.000528 ,0.000513 ,0.000514 ,0.000586 ,0.000523 ,0.000518 ,0.000593 ,0.000575 ,0.000531 ,0.000589 ,0.000581 ,0.000606 ,0.000658 ,0.000640 ,0.000600 ,0.000629 ,0.000643 ,0.000620 ,0.000667 ,0.000675 ,0.000669 ,0.000688 ,0.000711 ,0.000699 ,0.000719 ,0.000718 ,0.000703 ,0.000713 ,0.000726 ,0.000713 ,0.000774 ,0.000794 ,0.000776 ,0.000789 ,0.000736 ,0.000769 ,0.000811 ,0.000829 ,0.000797 ,0.000841 ,0.000818 ,0.000822 ,0.000861 ,0.000908 ,0.000893 ,0.000930 ,0.000897 ,0.000824 ,0.000926 ,0.000916 ,0.000886 ,0.000938 ,0.000933 ,0.000959 ,0.000939 ,0.000971 ,0.000919 ,0.000990 ,0.000976 ,0.000988 ,0.001000 ,0.000981 ,0.000936 ,0.001072 ,0.000987 ,0.000952 ,0.001103 ,0.001044 ,0.001001 ,0.001086 ,0.001069 ,0.001030 ,0.001149 ,0.001123 ,0.001090 ,0.001140 ,0.001182 ,0.001094 ,0.001148 ,0.001121 ,0.001123 ,0.001232 ,0.001192 ,0.001190 ,0.001199 ,0.001231 ,0.001243 ,0.001319 ,0.001275 ,0.001216 ,0.001254 ,0.001302 ,0.001216 ,0.001225 ,0.001218 ,0.001311 ,0.001369 ,0.001342 ,0.001290 ,0.001374 ,0.001346 ,0.001247 ,0.001361 ,0.001491 ,0.001363 ,0.001419 ,0.001450 ,0.001411 ,0.001407 ,0.001378 ,0.001300 ,0.001514 ,0.001433 ,0.001370 ,0.001482 ,0.001522 ,0.001485 ,0.001533 ,0.001467 ,0.001488 ,0.001631 ,0.001557 ,0.001545 ,0.001640 ,0.001609 ,0.001624 ,0.001682 ,0.001564 ,0.001420 ,0.001500 ,0.001569 ,0.001626 ,0.001715 ,0.001733 ,0.001680 ,0.001742 ,0.001736 ,0.001627 ,0.001737 ,0.001888 ,0.001733 ,0.001593 ,0.001799 ,0.001787 ,0.001827 ,0.001832 ,0.001697 ,0.001757 ,0.002017 ,0.001893 ,0.001837 ,0.001893 ,0.001758 ,0.001752 ,0.001874 ,0.001715 ,0.001752 ,0.001838 ,0.001914 ,0.001789 ,0.001870 ,0.001945 ,0.001922 ,0.002242 ,0.002137 ,0.001992 ,0.001929 ,0.001990 ,0.001988 ,0.002062 ,0.002029 ,0.001859 ,0.002025 ,0.001993 ,0.002028 ,0.001978 ,0.002112 ,0.002182 ,0.002161 ,0.002085 ,0.002061 ,0.002287 ,0.002107 ,0.002223 ,0.002199 ,0.002069 ,0.002142 ,0.002121 ,0.002133 ,0.002367 ,0.002346 ,0.002252 ,0.002185 ,0.002208 ,0.002153 ,0.002128 ,0.002195 ,0.002246 ,0.002222 ,0.002306 ,0.002252 ,0.002362 ,0.002334 ,0.002350 ,0.002382 ,0.002379 ,0.002293 ,0.002288 ,0.002369 ,0.002311 ,0.002388 ,0.002455 ,0.002382 ,0.002426 ,0.002323 ,0.002155 ,0.002266 ,0.002299 ,0.002377 ,0.002483 ,0.002349 ,0.002359 ,0.002409 ,0.002498 ,0.002565 ,0.002533 ,0.002447 ,0.002482 ,0.002489 ,0.002331 ,0.002717 ,0.002696 ,0.002474 ,0.002499 ,0.002472 ,0.002487 ,0.002528 ,0.002536 ,0.002616 ,0.002815 ,0.002698 ,0.002659 ,0.002511 ,0.002705 ,0.002730 ,0.002619 ,0.002742 ,0.002922 ,0.002753 ,0.002740 ,0.002755 ,0.002783 ,0.002613 ,0.002676 ,0.002801 ,0.003073 ,0.002850 ,0.002816 ,0.002756 ,0.002671 ,0.002673 ,0.002666 ,0.002881 ,0.002758 ,0.002681 ,0.002851 ,0.002925 ,0.002822 ,0.002902 ,0.002946 ,0.002719 ,0.002899 ,0.002743 ,0.002745 ,0.002850 ,0.002862 ,0.002828 ,0.002660 ,0.002646 ,0.002782 ,0.002770 ,0.002776 ,0.002833 ,0.002821 ,0.002914 ,0.002862 ,0.002862 ,0.003087 ,0.002955 ,0.002906 ,0.002903 ,0.003048 ,0.003270 ,0.003319 ,0.002930 ,0.002996 ,0.003022 ,0.003098 ,0.002985 ,0.003101 ,0.003063 ,0.002874 ,0.003035 ,0.003010 ,0.003026 ,0.002875 ,0.002926 ,0.003000 ,0.003151 ,0.003075 ,0.003088 ,0.002867 ,0.002863 ,0.002728 ,0.003072 ,0.003115 ,0.003084 ,0.003015 ,0.003194 ,0.003330 ,0.002953 ,0.003171 ,0.003048 ,0.003087 ,0.002998 ,0.003284 ,0.003132 ,0.003133 ,0.003183 ,0.003107 ,0.002994 ,0.003034 ,0.003098 ,0.002936 ,0.002982 ,0.003021 ,0.002972 ,0.002873 ,0.003010 ,0.003238 ,0.003127 ,0.003174 ,0.003193 ,0.003187 ,0.003158 ,0.003044 ,0.003184 ,0.003330 ,0.003280 ,0.003358 ,0.003311 ,0.003185 ,0.003282 ,0.003459 ,0.003143 ,0.002992 ,0.003129 ,0.003107 ,0.003094 ,0.003252 ,0.003058 ,0.003132 ,0.003082 ,0.002884 ,0.003130 ,0.003389 ,0.003084 ,0.003199 ,0.003174 ,0.003121 ,0.003276 ,0.003340 ,0.003278 ,0.003145 ,0.003282 ,0.003383 ,0.003216 ,0.003101 ,0.003211 ,0.002961 ,0.003208 ,0.003369 ,0.003481 ,0.004287 ,0.000000 ,0};
const gfloat estI[] = {0.000000 ,0.276609 ,0.309284 ,0.356029 ,0.475961 ,0.517953 ,0.570830 ,0.602358 ,0.544237 ,0.531685 ,0.561292 ,0.598919 ,0.532284 ,0.559676 ,0.578945 ,0.547344 ,0.525544 ,0.572840 ,0.532082 ,0.501399 ,0.508192 ,0.525138 ,0.526053 ,0.475673 ,0.502960 ,0.470536 ,0.444324 ,0.427984 ,0.439885 ,0.417249 ,0.414819 ,0.326751 ,0.366307 ,0.336159 ,0.326236 ,0.314864 ,0.321560 ,0.296435 ,0.295352 ,0.270918 ,0.284065 ,0.263741 ,0.236338 ,0.222267 ,0.242588 ,0.235664 ,0.160319 ,0.176465 ,0.170996 ,0.174158 ,0.148645 ,0.143520 ,0.154998 ,0.124479 ,0.143759 ,0.134925 ,0.104092 ,0.120764 ,0.116807 ,0.114055 ,0.090955 ,0.111178 ,0.136656 ,0.109871 ,0.099893 ,0.085071 ,0.090599 ,0.102620 ,0.087815 ,0.085636 ,0.092352 ,0.089897 ,0.078276 ,0.081751 ,0.078367 ,0.086480 ,0.092347 ,0.089441 ,0.092784 ,0.081754 ,0.075350 ,0.088999 ,0.072191 ,0.077681 ,0.079719 ,0.087819 ,0.107592 ,0.112140 ,0.090397 ,0.069682 ,0.068721 ,0.061769 ,0.051751 ,0.045028 ,0.041884 ,0.038613 ,0.039043 ,0.039875 ,0.037221 ,0.035584 ,0.033699 ,0.037354 ,0.034968 ,0.033096 ,0.030286 ,0.026798 ,0.035021 ,0.032647 ,0.035302 ,0.032894 ,0.045415 ,0.042127 ,0.040553 ,0.041327 ,0.045347 ,0.048466 ,0.043971 ,0.040868 ,0.047132 ,0.043452 ,0.039768 ,0.045914 ,0.045099 ,0.050156 ,0.058387 ,0.057902 ,0.065952 ,0.056345 ,0.046327 ,0.054248 ,0.060225 ,0.055464 ,0.047130 ,0.045375 ,0.037319 ,0.055061 ,0.051115 ,0.038554 ,0.036117 ,0.031054 ,0.029696 ,0.030744 ,0.026250 ,0.030035 ,0.028705 ,0.029360 ,0.029159 ,0.029212 ,0.033344 ,0.058453 ,0.060347 ,0.037658 ,0.031724 ,0.031073 ,0.031315 ,0.032643 ,0.032651 ,0.031016 ,0.026394 ,0.031767 ,0.023260 ,0.023498 ,0.027323 ,0.029295 ,0.032938 ,0.034746 ,0.038901 ,0.040622 ,0.042617 ,0.039271 ,0.043619 ,0.050871 ,0.057868 ,0.068211 ,0.081201 ,0.079151 ,0.089549 ,0.076007 ,0.063865 ,0.043042 ,0.044831 ,0.040654 ,0.039590 ,0.033990 ,0.029433 ,0.032030 ,0.028556 ,0.031232 ,0.036863 ,0.028273 ,0.029223 ,0.024309 ,0.024522 ,0.022613 ,0.021919 ,0.027041 ,0.025954 ,0.029600 ,0.029013 ,0.031147 ,0.032957 ,0.030606 ,0.035773 ,0.036785 ,0.030393 ,0.035272 ,0.034203 ,0.037736 ,0.039501 ,0.036903 ,0.033078 ,0.033058 ,0.038916 ,0.040251 ,0.039444 ,0.038886 ,0.046992 ,0.038870 ,0.031971 ,0.034336 ,0.032661 ,0.037193 ,0.040767 ,0.046316 ,0.039333 ,0.036674 ,0.039898 ,0.051667 ,0.042200 ,0.046569 ,0.029927 ,0.035369 ,0.036175 ,0.031392 ,0.034540 ,0.027495 ,0.027689 ,0.027372 ,0.026817 ,0.024501 ,0.022074 ,0.022775 ,0.021180 ,0.023324 ,0.024531 ,0.019586 ,0.022080 ,0.021719 ,0.020457 ,0.020599 ,0.019435 ,0.018897 ,0.015018 ,0.015743 ,0.021135 ,0.021976 ,0.021524 ,0.019312 ,0.018656 ,0.022077 ,0.021379 ,0.020838 ,0.027501 ,0.028877 ,0.026936 ,0.028202 ,0.022222 ,0.022604 ,0.022502 ,0.019049 ,0.018143 ,0.017809 ,0.018521 ,0.018638 ,0.015941 ,0.016128 ,0.016728 ,0.018375 ,0.018807 ,0.021383 ,0.017293 ,0.018151 ,0.019460 ,0.018108 ,0.016524 ,0.016808 ,0.019084 ,0.019212 ,0.017960 ,0.015869 ,0.016506 ,0.014805 ,0.015633 ,0.017135 ,0.020373 ,0.015840 ,0.016403 ,0.017347 ,0.018075 ,0.016717 ,0.015078 ,0.013927 ,0.014860 ,0.015483 ,0.017509 ,0.021922 ,0.018232 ,0.016686 ,0.016988 ,0.015066 ,0.016404 ,0.015555 ,0.017117 ,0.015335 ,0.018572 ,0.020281 ,0.015484 ,0.012506 ,0.013954 ,0.018749 ,0.024403 ,0.031678 ,0.039099 ,0.041026 ,0.051315 ,0.055732 ,0.064550 ,0.076940 ,0.085438 ,0.106542 ,0.120549 ,0.108856 ,0.112150 ,0.136864 ,0.141327 ,0.168006 ,0.208799 ,0.202108 ,0.248451 ,0.286193 ,0.464134 ,0.530971 ,1.062617 ,1.697447 ,2.859753 ,1.826255 ,0.576938 ,0.373661 ,0.261622 ,0.196220 ,0.151582 ,0.124425 ,0.114667 ,0.096896 ,0.080075 ,0.062242 ,0.061938 ,0.061427 ,0.056666 ,0.046101 ,0.035082 ,0.031811 ,0.028870 ,0.028639 ,0.026346 ,0.021597 ,0.023778 ,0.023820 ,0.021707 ,0.019692 ,0.018483 ,0.027753 ,0.039315 ,0.040145 ,0.042141 ,0.040100 ,0.039228 ,0.043290 ,0.046566 ,0.042317 ,0.043864 ,0.042564 ,0.047168 ,0.041461 ,0.043925 ,0.040378 ,0.038530 ,0.040542 ,0.041752 ,0.038471 ,0.039211 ,0.038085 ,0.043350 ,0.039512 ,0.039900 ,0.032094 ,0.028423 ,0.026273 ,0.027982 ,0.028172 ,0.024314 ,0.024113 ,0.025716 ,0.021316 ,0.019488 ,0.015920 ,0.015745 ,0.016395 ,0.019485 ,0.017776 ,0.014836 ,0.013463 ,0.013781 ,0.016681 ,0.018330 ,0.017400 ,0.018217 ,0.016485 ,0.016142 ,0.016955 ,0.013616 ,0.018696 ,0.018359 ,0.022001 ,0.021717 ,0.020482 ,0.022780 ,0.025774 ,0.031456 ,0.030705 ,0.028672 ,0.027919 ,0.030586 ,0.034122 ,0.038574 ,0.045685 ,0.047396 ,0.049431 ,0.053478 ,0.055973 ,0.056970 ,0.056173 ,0.051494 ,0.043928 ,0.044023 ,0.045072 ,0.034082 ,0.033074 ,0.028364 ,0.026123 ,0.023031 ,0.022187 ,0.020611 ,0.020294 ,0.023409 ,0.020594 ,0.014446 ,0.013624 ,0.011968 ,0.015453 ,0.017112 ,0.014479 ,0.014225 ,0.014763 ,0.016983 ,0.015638 ,0.011838 ,0.011958 ,0.013859 ,0.016651 ,0.015422 ,0.015975 ,0.016369 ,0.017101 ,0.015854 ,0.017814 ,0.017180 ,0.018341 ,0.016507 ,0.022643 ,0.022472 ,0.022018 ,0.026164 ,0.021683 ,0.019871 ,0.024919 ,0.026741 ,0.025563 ,0.025637 ,0.024822 ,0.019955 ,0.020896 ,0.023808 ,0.021625 ,0.020772 ,0.020809 ,0.019435 ,0.018294 ,0.015560 ,0.017968 ,0.019786 ,0.019814 ,0.018627 ,0.017506 ,0.017014 ,0.014848 ,0.015038 ,0.012804 ,0.011692 ,0.010394 ,0.010125 ,0.009732 ,0.011704 ,0.010089 ,0.010746 ,0.014934 ,0.016466 ,0.010937 ,0.010520 ,0.012252 ,0.013445 ,0.018009 ,0.015753 ,0.018437 ,0.023842 ,0.022017 ,0.018705 ,0.021337 ,0.020132 ,0.020345 ,0.017112 ,0.022136 ,0.022421 ,0.022556 ,0.024515 ,0.024997 ,0.021243 ,0.018962 ,0.017693 ,0.021409 ,0.020481 ,0.019871 ,0.020732 ,0.017558 ,0.016423 ,0.015837 ,0.015449 ,0.014359 ,0.013424 ,0.012551 ,0.011521 ,0.010581 ,0.010010 ,0.009436 ,0.008630 ,0.008759 ,0.008053 ,0.008565 ,0.008377 ,0.007443 ,0.005878 ,0.006415 ,0.007375 ,0.006838 ,0.005625 ,0.005841 ,0.005953 ,0.005636 ,0.004990 ,0.004539 ,0.004319 ,0.004482 ,0.004661 ,0.004160 ,0.003637 ,0.003346 ,0.002670 ,0.002317 ,0.001975 ,0.002379 ,0.002217 ,0.001864 ,0.001735 ,0.001569 ,0.001401 ,0.001206 ,0.001002 ,0.000892 ,0.000876 ,0.000771 ,0.000704 ,0.000579 ,0.000388 ,0.000405 ,0.000403 ,0.000362 ,0.000350 ,0.000381 ,0.000358 ,0.000377 ,0.000391 ,0.000403 ,0.000379 ,0.000397 ,0.000330 ,0.000383 ,0.000401 ,0.000374 ,0.000374 ,0.000399 ,0.000388 ,0.000397 ,0.000373 ,0.000452 ,0.000467 ,0.000459 ,0.000406 ,0.000437 ,0.000460 ,0.000471 ,0.000386 ,0.000386 ,0.000450 ,0.000467 ,0.000389 ,0.000442 ,0.000416 ,0.000473 ,0.000471 ,0.000513 ,0.000466 ,0.000505 ,0.000521 ,0.000494 ,0.000446 ,0.000528 ,0.000478 ,0.000473 ,0.000525 ,0.000512 ,0.000543 ,0.000526 ,0.000423 ,0.000531 ,0.000534 ,0.000578 ,0.000607 ,0.000613 ,0.000535 ,0.000635 ,0.000670 ,0.000594 ,0.000595 ,0.000674 ,0.000534 ,0.000634 ,0.000628 ,0.000727 ,0.000687 ,0.000728 ,0.000711 ,0.000690 ,0.000653 ,0.000799 ,0.000728 ,0.000728 ,0.000623 ,0.000734 ,0.000735 ,0.000716 ,0.000668 ,0.000679 ,0.000761 ,0.000898 ,0.000810 ,0.000764 ,0.000761 ,0.000812 ,0.000794 ,0.000891 ,0.000742 ,0.000909 ,0.000962 ,0.000890 ,0.000875 ,0.000927 ,0.000789 ,0.000923 ,0.000909 ,0.000998 ,0.001122 ,0.001007 ,0.000938 ,0.000912 ,0.000740 ,0.000854 ,0.000961 ,0.000992 ,0.000931 ,0.000960 ,0.000944 ,0.001029 ,0.001145 ,0.001043 ,0.000948 ,0.001185 ,0.001271 ,0.001201 ,0.001060 ,0.001001 ,0.001062 ,0.001217 ,0.001171 ,0.001137 ,0.001100 ,0.001089 ,0.001011 ,0.001174 ,0.001135 ,0.001174 ,0.000942 ,0.001021 ,0.001148 ,0.001048 ,0.001107 ,0.001155 ,0.001305 ,0.001338 ,0.001174 ,0.001311 ,0.001565 ,0.001297 ,0.001025 ,0.001095 ,0.001022 ,0.001203 ,0.001396 ,0.001311 ,0.001205 ,0.001348 ,0.000954 ,0.001153 ,0.001370 ,0.001495 ,0.001643 ,0.001477 ,0.001308 ,0.001463 ,0.001421 ,0.001440 ,0.001438 ,0.001219 ,0.001342 ,0.001476 ,0.001554 ,0.001627 ,0.001404 ,0.001265 ,0.001297 ,0.001416 ,0.001607 ,0.001617 ,0.001626 ,0.001514 ,0.001751 ,0.001685 ,0.001543 ,0.001678 ,0.001756 ,0.001487 ,0.001513 ,0.001562 ,0.001604 ,0.001720 ,0.001560 ,0.001666 ,0.001465 ,0.001627 ,0.001646 ,0.001944 ,0.001817 ,0.001493 ,0.001523 ,0.001775 ,0.001824 ,0.001954 ,0.001663 ,0.001526 ,0.001472 ,0.002074 ,0.002112 ,0.002279 ,0.002142 ,0.001844 ,0.001833 ,0.001970 ,0.001725 ,0.001869 ,0.002030 ,0.002029 ,0.001712 ,0.001879 ,0.001927 ,0.001756 ,0.001904 ,0.002100 ,0.002006 ,0.002066 ,0.002006 ,0.002037 ,0.002258 ,0.002107 ,0.002305 ,0.002312 ,0.002650 ,0.002078 ,0.001910 ,0.001923 ,0.001661 ,0.002061 ,0.001788 ,0.002054 ,0.002327 ,0.002336 ,0.002436 ,0.002052 ,0.001715 ,0.002022 ,0.002173 ,0.002317 ,0.002262 ,0.002293 ,0.002046 ,0.002143 ,0.002229 ,0.002227 ,0.002210 ,0.002214 ,0.002272 ,0.002657 ,0.002363 ,0.002336 ,0.002568 ,0.002458 ,0.002035 ,0.002102 ,0.002269 ,0.002316 ,0.002341 ,0.002256 ,0.002945 ,0.002288 ,0.001935 ,0.001988 ,0.002336 ,0.002564 ,0.002314 ,0.002179 ,0.001987 ,0.002111 ,0.001730 ,0.001883 ,0.001976 ,0.002173 ,0.002086 ,0.002605 ,0.002410 ,0.002313 ,0.002513 ,0.002500 ,0.002683 ,0.002633 ,0.002384 ,0.002456 ,0.002558 ,0.002109 ,0.002085 ,0.002476 ,0.002685 ,0.002740 ,0.002981 ,0.002735 ,0.002551 ,0.002898 ,0.002602 ,0.002688 ,0.002636 ,0.002732 ,0.002962 ,0.002596 ,0.002430 ,0.002573 ,0.002591 ,0.002618 ,0.002470 ,0.002690 ,0.002631 ,0.002702 ,0.002919 ,0.003051 ,0.002999 ,0.002667 ,0.002832 ,0.002834 ,0.002359 ,0.002444 ,0.002767 ,0.003000 ,0.002303 ,0.002725 ,0.002674 ,0.002644 ,0.002168 ,0.002236 ,0.002083 ,0.002905 ,0.003180 ,0.002901 ,0.002736 ,0.002587 ,0.002666 ,0.002596 ,0.002339 ,0.002651 ,0.003002 ,0.003111 ,0.002885 ,0.002638 ,0.002714 ,0.003129 ,0.002728 ,0.002991 ,0.003300 ,0.003550 ,0.002945 ,0.002700 ,0.002505 ,0.002651 ,0.002541 ,0.002792 ,0.002798 ,0.002824 ,0.003037 ,0.003681 ,0.003491 ,0.003261 ,0.003272 ,0.003387 ,0.003111 ,0.002791 ,0.003119 ,0.003159 ,0.002292 ,0.002953 ,0.003780 ,0.003194 ,0.002721 ,0.003497 ,0.003721 ,0.003254 ,0.002788 ,0.002805 ,0.003249 ,0.003066 ,0.002994 ,0.003003 ,0.002310 ,0.002731 ,0.002933 ,0.003499 ,0.003757 ,0.003418 ,0.003201 ,0.003038 ,0.003076 ,0.003300 ,0.003448 ,0.003082 ,0.002774 ,0.003093 ,0.002854 ,0.002601 ,0.002621 ,0.003080 ,0.003269 ,0.003410 ,0.003329 ,0.003230 ,0.003207 ,0.003070 ,0.002885 ,0.003285 ,0.003016 ,0.003827 ,0.003792 ,0.003319 ,0.002962 ,0.003287 ,0.002729 ,0.002399 ,0.002724 ,0.002822 ,0.003035 ,0.003110 ,0.002850 ,0.002844 ,0.002994 ,0.002682 ,0.002761 ,0.002715 ,0.002829 ,0.003164 ,0.003390 ,0.003102 ,0.002926 ,0.003062 ,0.003200 ,0.002696 ,0.002605 ,0.003150 ,0.003671 ,0.003617 ,0.003851 ,0.003311 ,0.000000 ,0.000000 ,0};

typedef struct _GstPdNrAudio GstPdNrAudio;
typedef struct _GstPdNrAudioClass GstPdNrAudioClass;

typedef struct _AudioDataStruct GstAudioData;

struct _GstPdNrAudio
{
  GstAudioFilter base_pdnraudio;

  gfloat *in_array;
  gfloat *out_array;

  guint16 hop_offset;

  GstFFTF32 *fft_ctx;
  GstFFTF32Complex *frequeny_data;
  guint16 frequeny_sum_count;

  FILE *aFile;
  FILE *bFile;
};

struct _AudioDataStruct {
    gfloat data;
};

struct _GstPdNrAudioClass
{
  GstAudioFilterClass base_pdnraudio_class;
};

GType gst_pd_nr_audio_get_type (void);

G_END_DECLS

#endif
